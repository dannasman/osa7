(this["webpackJsonpblogilista-frontend"]=this["webpackJsonpblogilista-frontend"]||[]).push([[0],{17:function(e,t,n){e.exports=n(40)},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),u=n.n(c),l=n(6),o=n(3),i=n.n(o),s=n(4),d=n(1),f=function(e){var t=e.blog,n=e.handleLike,c=e.handleRemove,u=e.own,l=Object(a.useState)(!1),o=Object(d.a)(l,2),i=o[0],s=o[1],f=i?"hide":"view";return r.a.createElement("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},className:"blog"},r.a.createElement("div",null,r.a.createElement("i",null,t.title)," by ",t.author," ",r.a.createElement("button",{onClick:function(){return s(!i)}},f)),i&&r.a.createElement("div",null,r.a.createElement("div",null,t.url),r.a.createElement("div",null,"likes ",t.likes,r.a.createElement("button",{onClick:function(){return n(t.id)}},"like")),r.a.createElement("div",null,t.user.name),u&&r.a.createElement("button",{onClick:function(){return c(t.id)}},"remove")))},m=function(e){var t=e.notification;if(!t)return null;var n={borderStyle:"solid",borderRadius:5,padding:10,color:"success"===t.type?"green":"red",background:"lightgrey"};return r.a.createElement("div",{style:n},t.message)},b=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),c=Object(d.a)(n,2),u=c[0],l=c[1],o={display:u?"none":""},i={display:u?"":"none"},s=function(){l(!u)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:s}})),r.a.createElement("div",null,r.a.createElement("div",{style:o},r.a.createElement("button",{onClick:s},e.buttonLabel)),r.a.createElement("div",{style:i,className:"togglableContent"},e.children,r.a.createElement("button",{onClick:s},"cancel")))}));b.displayName="Togglable";var p=b,v=function(e){var t=Object(a.useState)(""),n=Object(d.a)(t,2),c=n[0],u=n[1],l=Object(a.useState)(""),o=Object(d.a)(l,2),i=o[0],s=o[1],f=Object(a.useState)(""),m=Object(d.a)(f,2),b=m[0],p=m[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"create new"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.createBlog({title:c,author:i,url:b}),u(""),s(""),p("")}},r.a.createElement("div",null,"author",r.a.createElement("input",{id:"author",value:i,onChange:function(e){var t=e.target;return s(t.value)}})),r.a.createElement("div",null,"title",r.a.createElement("input",{id:"title",value:c,onChange:function(e){var t=e.target;return u(t.value)}})),r.a.createElement("div",null,"url",r.a.createElement("input",{id:"url",value:b,onChange:function(e){var t=e.target;return p(t.value)}})),r.a.createElement("button",{id:"create"},"create")))},g=n(5),E=n.n(g),h=function(e){return localStorage.setItem("loggedBlogAppUser",JSON.stringify(e))},O=function(){return JSON.parse(localStorage.getItem("loggedBlogAppUser"))},j=function(){return localStorage.removeItem("loggedBlogAppUser")},k=function(){return{headers:{Authorization:"bearer ".concat(O().token)}}},w=function(){return E.a.get("/api/blogs").then((function(e){return e.data}))},y=function(e){return E.a.post("/api/blogs",e,k()).then((function(e){return e.data}))},S=function(e){return E.a.put("".concat("/api/blogs","/").concat(e.id),e,k()).then((function(e){return e.data}))},x=function(e){return E.a.delete("".concat("/api/blogs","/").concat(e),k()).then((function(e){return e.data}))},C={login:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},B=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(null),o=Object(d.a)(u,2),b=o[0],g=o[1],E=Object(a.useState)(""),k=Object(d.a)(E,2),B=k[0],R=k[1],I=Object(a.useState)(""),L=Object(d.a)(I,2),N=L[0],A=L[1],J=Object(a.useState)(null),T=Object(d.a)(J,2),U=T[0],D=T[1],V=r.a.createRef();Object(a.useEffect)((function(){w().then((function(e){return c(e)}))}),[]),Object(a.useEffect)((function(){var e=O();g(e)}),[]);var z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";D({message:e,type:t}),setTimeout((function(){D(null)}),5e3)},H=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,C.login({username:B,password:N});case 4:n=e.sent,R(""),A(""),g(n),z("".concat(n.name," welcome back!")),h(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),z("wrong username/password","error");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(t);case 3:a=e.sent,V.current.toggleVisibility(),c(n.concat(a)),z("a new blog '".concat(a.title,"' by ").concat(a.author," added!")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(s.a)(i.a.mark((function e(t){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.find((function(e){return e.id===t})),r=Object(l.a)(Object(l.a)({},a),{},{likes:a.likes+1,user:a.user.id}),e.next=4,S(r);case 4:c(n.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},a),{},{likes:a.likes+1}):e})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.find((function(e){return e.id===t})),!window.confirm("Remove blog ".concat(a.title," by ").concat(a.author))){e.next=6;break}return e.next=5,x(t);case 5:c(n.filter((function(e){return e.id!==t})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!b)return r.a.createElement("div",null,r.a.createElement("h2",null,"login to application"),r.a.createElement(m,{notification:U}),r.a.createElement("form",{onSubmit:H},r.a.createElement("div",null,"username",r.a.createElement("input",{id:"username",value:B,onChange:function(e){var t=e.target;return R(t.value)}})),r.a.createElement("div",null,"password",r.a.createElement("input",{id:"password",value:N,onChange:function(e){var t=e.target;return A(t.value)}})),r.a.createElement("button",{id:"login"},"login")));return r.a.createElement("div",null,r.a.createElement("h2",null,"blogs"),r.a.createElement(m,{notification:U}),r.a.createElement("p",null,b.name," logged in ",r.a.createElement("button",{onClick:function(){g(null),j()}},"logout")),r.a.createElement(p,{buttonLabel:"create new blog",ref:V},r.a.createElement(v,{createBlog:W})),n.sort((function(e,t){return t.likes-e.likes})).map((function(e){return r.a.createElement(f,{key:e.id,blog:e,handleLike:q,handleRemove:F,own:b.username===e.user.username})})))};u.a.render(r.a.createElement(B,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.b885944a.chunk.js.map